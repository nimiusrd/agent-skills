# PBT 自己採点ルーブリック

テスト設計完了後、以下の基準で自己採点し、合計24点未満なら改善して再提出する（最大2回）。

## A. プロパティ品質（各0-2点）

| ID | 基準 | 0点 | 1点 | 2点 |
|----|------|-----|-----|-----|
| A1 | 仕様性 | 仕様と無関係 | 一部の要件のみ対応 | 全要件にプロパティが紐づく |
| A2 | 非自明性 | 型チェック/例外不発のみ | 一部自明 | 全て意味のある不変条件 |
| A3 | 強度（バグ検出力） | 正しい実装しか通さない制約なし | 一部のバグを検出 | バグ例が全プロパティに示され、各々異なるバグクラスを検出 |
| A4 | オラクル健全性 | テスト内で実装を再実装 | 一部独立 | 全プロパティが実装から独立した根拠で判定 |
| A5 | 前提条件の明示 | assume乱用 | 一部不明確 | 制約はgeneratorで表現、残余のassumeに根拠あり |

## B. 生成戦略品質（各0-2点）

| ID | 基準 | 0点 | 1点 | 2点 |
|----|------|-----|-----|-----|
| B1 | ドメイン妥当性 | 入力空間の一部のみ | 主要パスをカバー | 全入力ドメインを正確に表現 |
| B2 | フィルタ乱用回避 | 棄却率>50% | 棄却率10-50% | 棄却率<10%、制約はgenerator構築で解決 |
| B3 | エッジケース戦略 | なし | 一部（空・境界）のみ | 境界・空・極大・重複・偏り分布を意図的に含む |
| B4 | 多様性 | 単一パターン | 2-3パターン | 正常系・異常系・境界を組み合わせた複合生成 |
| B5 | 縮小性 | map/filterチェーンで縮小不能 | 部分的に縮小可 | 基本Arbitraryの組み合わせで自然に縮小 |
| B6 | コスト制御 | 生成が遅い/無限ループリスク | 概ね問題なし | サイズ上限明示、生成コスト予測可能 |

## C. 運用性（各0-2点）

| ID | 基準 | 0点 | 1点 | 2点 |
|----|------|-----|-----|-----|
| C1 | 再現性 | seed記録なし | seed記録あり | seed+最小反例+再現コマンドが揃う |
| C2 | 診断可能性 | 失敗メッセージが不明瞭 | 入力は表示 | 入力・期待値・実値・プロパティ名が全て表示 |
| C3 | 回帰化しやすさ | 手動のみ | 反例を手動でコピー可 | 反例をユニットテストに変換する手順が示される |
| C4 | フレーク耐性 | 非決定的に落ちる | 稀にフレーク | 決定論的 or seed固定で完全再現 |

## 合計

- 満点: 30点（15項目 x 2点）
- 合格ライン: **24点以上**
- 24点未満の場合: 不足項目を特定し、プロパティ/生成戦略/ログを改善して再採点（最大2回）
